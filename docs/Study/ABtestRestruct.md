---
layout: default
title:  "A/B test 재구성"
parent: Study
permalink: /study/ABtestRestruct/
nav_order: 3
date: 2023-07-28
---

***

회사에서 진행했던 A/B test를 회고하고, 부족했던 부분을 보완해서 다시 분석해보는 것이 목적

***

## A/B test 분석, 결과 전달에 필수적으로 들어가야 할 내용

- 가설 탐색
- 실험 진행 여부 결정
  - 이 가설을 검증하는데 A/B test가 꼭 필요한지?
    - 비즈니스 임팩트는 있는지?
    - 비즈니스 임팩트가 있는데, 불확실성이 존재함을 확인했는지?
    - 불확실성? 기존에 존재하지 않은 새로운 기능이 추가될 때 (과거 데이터가 없으니 판단 어려움)
- 실험 설계
  - 실험 타켓
    - 어떤 유저에게 test를 진행할지?
    - 어떻게 A/B를 나눌지?
  - 지표
    - 실험을 통해 어떤 지표를 개선하고 싶은지?
    - Primary, Secondary, Guardrail Metric은 무엇?
    - MDE를 설정했는지?
  - 실험 기간
    - 언제, 어느 기간 동안 진행할지?
    - 유의미함이 검증될 수 있는 샘플 수는 무엇이고, 그에 따라 책정된건지?
    - 샘플 책정 시 MDE를 고려했는지?
    - 강의에선 보통 2주가 필요하다고 함
    - 프로모션 등 외부 요인이나 계절성 존재하는 기간 제외되었는지?
  - 실험 방식
    - 빈도주의 접근. 어떤 통계 검정 방식을 사용할 것인지?
  - 멘탈 시뮬레이션을 했는지
    - 실험이 잘 되었을 때 / 안되었을 때 어떤 행동을 할까?
    - 의사 결정할 수 없는 실험 결과일 경우 어떤 행동을 할까?
  - 실험을 위한 데이터 로그 설계
- 기능 배포: 데이터 잘 들어오는지 확인, 결과 분석 준비
- 실험 분석
  - 지표 확인
    - 가드레일 지표는?
    - Primary metric은?
    - P 값은
  - 결과 해석
    - 초두 효과(Primary effect), 신기 효과(Novelty effect) 등의 현상이 나타났는지?
  - 실험 결과가 애매하다면, 사후 분석을 진행했는지?
    - Segment 분석 (주로 유저 정보 기반)
    - A/A test는 시도해봤는지? (트래픽만 분할하고 화면 그대로 두고 실험 진행)
  - 종합해서 실험 종료 판단
    - decision tree와 비슷한 방식으로 실험을 종료시켰는지?
- 실험 회고: 회고 및 이후 action plan 수립
- 기타
  - 실험이 진행되는 기간 사내 전파했는지? 마케팅이나 CS에 전파해서 실험에 영향 받는 이슈 있으면 바로 확인 필요
  - 실험에 대한 내용 잘 기록했는지 (다음 분석을 위한 토대)
  - 조직에 lesson learned 잘 공유했는지
  - 실험이 많아질 것을 대비해 분석 자동화를 고려했는지
    - 스크립트를 자동화 염두에 두고 코딩해볼 수도 있고
    - 실험 플랫폼 도입할 것을 건의해볼 수도 있고

***

## A/B test 1: 인게임 재화 충전 모달 A/B test

- 21년 11월에 진행
- 충전 모달에 표시되는 상품 금액은 모두 달러
- 충전 모달 퍼널

| 퍼널 1                                       | 퍼널 2                                       | 퍼널 3                                       |
|----------------------------------------------|----------------------------------------------|----------------------------------------------|
| ![](https://s-seo.github.io/assets/images/post_ABtestRestruct_1.png){: width="400" height="200"} | ![](https://s-seo.github.io/assets/images/post_ABtestRestruct_2.png){: width="400" height="200"} | ![](https://s-seo.github.io/assets/images/post_ABtestRestruct_3.png){: width="400" height="200"} |


- 발단: 국가별 퍼널 전환율 차이가 남을 데이터 통해 확인
  - 왜 전환율 차이가 날까?
    - 추측 1 : 실제로 결제해야 하는 금액을 정확히 인지한 시점에 이탈이 발생한다.
    - 추측 2 : 스팀의 충전과정이 불편하기 때문에 이탈한다.
- 가설: G-Coin 충전 모달에서 자국통화로 예상결제 금액을 보여주면 전환율이 높아지지 않을까? (NA 지역 외에서)
- 실험 설계
  - PC 플랫폼 대상
  - 타겟 유저: 마지막 OS언어가 중국어 간체 zh_CN인 유저
  - A/B 구분 방법: account_id 첫글자가 0, 1, 2, 3, 4, 5, 6, 7이면 A, 나머지는 B
  - 확인하려는 지표: G-coin 충전모달의 전환율
  - 일정: 21년 9월에 10일 동안 진행

- 테스트하려는 UI

| 기존                                       | 변경                                       |
|--------------------------------------------|--------------------------------------------|
| ![](https://s-seo.github.io/assets/images/post_ABtestRestruct_4.png){: width="400" height="200"} | ![](https://s-seo.github.io/assets/images/post_ABtestRestruct_5.png){: width="400" height="200"} |


- 분석
  - 가설
    - 귀무가설: A 그룹과 B 그룹 간 전환율은 통계적으로 유의미한 차이가 없다
    - 대립가설: A 그룹과 B 그룹 간 전환율은 통계적으로 유의미한 차이가 있다
  - 검정 방법: 비율 검정, 카이제곱 검정

- 결과
  - 기존 UI(달러만 표시)에 비해, 자국 통화를 같이 표시한 경우, 충전모달에서 전환율이 낮아지고(약 10%p), 스팀 결제 단계에서 전환율이 높아졌다(약 9%p)
  - 그룹 간 전환율은 통계적으로 유의미하게 차이가 있다.
    - 보다 정확히는, 차이가 없다고 보기엔 주어진 데이터(전환율 차이)가 너무 강력한 반증이다.
    - = 추측 1을 어느정도 뒷받침함
  - 스팀 결제가 불편했다면, 스텀 결제 단계에서 전환율이 높아지지 않았을 것 →  유저들이 스팀 결제 시스템을 불편하다고 느끼진 않는다.
    - = 추측 2에 대한 반증

## 회고 (생각나는 것들만)

- 지표를 하나만 봄
- MDE 설정 없음
- 샘플 수 계산 없이 실험 기간 잡음
- 일부 유저도 아닌 전체 유저 대상이었던 것 같음...
- 멘탈 시뮬레이션 무 (결과 안 좋으면 당연히 롤백~ 끝! 이었고, 이후 사후분석을 진행할 생각 없었음)
- 로그 설계는 필요없었음. 패스
- 애매한 실험 결과인데, segment 어찌 나눠보긴 했으나 전달력이 떨어졌음 (결과 해석하면서 나도 무슨 말 하는지 몰랐던 기억이..)
- decision tree와 같이 정형화된 의사결정 방식이 아니라, 그냥 주먹구구 식으로 결과 전달하고, 흐지부지 된 것으로 기억남




